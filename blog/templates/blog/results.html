<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>模型結果展示頁面</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="d-flex flex-column min-vh-100">
    {% include "blog/_navbar.html" %}
    <div class="container">
        <br>
        <!-- 📌 頁面標題 -->
        <h2 class="mb-4 text-center">📊 模型訓練與測試結果頁面</h2>

        <!-- 🔁 歷史紀錄區塊：未來從資料庫傳入 -->
        {% if results %}
            <h3>🔥 熱像圖</h3>
            <div id="heatmap-container" class="row"></div>
            
            <h3 class="mt-5">📈 訓練曲線</h3>
            <div id="trainplot-container" class="row"></div>
        {% else %}
            <div class="alert alert-warning text-center">
                尚無任何訓練或測試紀錄。
            </div>
        {% endif %}

        <!-- 🔙 返回首頁按鈕 -->
        <div class="text-center mt-4">
            <a href="/" class="btn btn-secondary btn-lg">🔙 返回首頁</a>
        </div>
    </div>
    <script>
        socket.onmessage = function(event) {
            const data = JSON.parse(event.data);

            if (data.type === 'media_paths') {
                const mediaUrl = data.url;

                fetch(mediaUrl + "/heatmap/")
                    .then(response => response.text())
                    .then(html => {
                        document.getElementById('heatmap-container').innerHTML = html;
                    });

                fetch(mediaUrl + "/trainplot/")
                    .then(response => response.text())
                    .then(html => {
                        document.getElementById('trainplot-container').innerHTML = html;
                    });
            }
        };
    </script>
</body>
</html>
