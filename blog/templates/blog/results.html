<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>æ¨¡å‹çµæœå±•ç¤ºé é¢</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="d-flex flex-column min-vh-100">
    {% include "blog/_navbar.html" %}
    <div class="container">
        <br>
        <!-- ğŸ“Œ é é¢æ¨™é¡Œ -->
        <h2 class="mb-4 text-center">ğŸ“Š æ¨¡å‹è¨“ç·´èˆ‡æ¸¬è©¦çµæœé é¢</h2>

        <!-- ğŸ” æ­·å²ç´€éŒ„å€å¡Šï¼šæœªä¾†å¾è³‡æ–™åº«å‚³å…¥ -->
        {% if results %}
            <h3>ğŸ”¥ ç†±åƒåœ–</h3>
            <div id="heatmap-container" class="row"></div>
            
            <h3 class="mt-5">ğŸ“ˆ è¨“ç·´æ›²ç·š</h3>
            <div id="trainplot-container" class="row"></div>
        {% else %}
            <div class="alert alert-warning text-center">
                å°šç„¡ä»»ä½•è¨“ç·´æˆ–æ¸¬è©¦ç´€éŒ„ã€‚
            </div>
        {% endif %}

        <!-- ğŸ”™ è¿”å›é¦–é æŒ‰éˆ• -->
        <div class="text-center mt-4">
            <a href="/" class="btn btn-secondary btn-lg">ğŸ”™ è¿”å›é¦–é </a>
        </div>
    </div>
    <script>
        socket.onmessage = function(event) {
            const data = JSON.parse(event.data);

            if (data.type === 'media_paths') {
                const mediaUrl = data.url;

                fetch(mediaUrl + "/heatmap/")
                    .then(response => response.text())
                    .then(html => {
                        document.getElementById('heatmap-container').innerHTML = html;
                    });

                fetch(mediaUrl + "/trainplot/")
                    .then(response => response.text())
                    .then(html => {
                        document.getElementById('trainplot-container').innerHTML = html;
                    });
            }
        };
    </script>
</body>
</html>
